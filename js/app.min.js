"use strict";document.addEventListener("DOMContentLoaded",(function(){var e="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,t=new Lenis({lerp:.06,smooth:!0});function o(e){var t=0,o=window.innerWidth-document.body.offsetWidth+"px",r=document.querySelectorAll(".fixed");e?(document.body.classList.add("scroll-disabled"),t=window.pageYOffset,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.top?document.body.style.top=document.body.style.top:document.body.style.top="-"+t+"px",document.body.style.width="100%",document.body.style.paddingRight=o,r&&r.forEach((function(e){e.style.marginRight=o}))):(document.body.classList.remove("scroll-disabled"),t=Math.abs(parseInt(document.querySelector("body").style.top.replace("px",""))),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("position"),document.body.style.removeProperty("top"),document.body.style.removeProperty("width"),document.body.style.removeProperty("padding-right"),r&&r.forEach((function(e){e.style.removeProperty("margin-right")})),window.scrollTo({top:isNaN(t)?0:t,behavior:"instant"}))}function r(e){var t=window.innerWidth>=744?1440:375;return"".concat(e/t*100,"vw")}function n(){var e="";b.forEach((function(t){var o=t.offsetTop,r=t.offsetHeight;window.pageYOffset>=o-r/3&&(e=t.getAttribute("id"))})),!e&&L&&(e=L.getAttribute("id")),q.forEach((function(t){t.parentNode.classList.remove("is--active"),t.getAttribute("href")==="#"+e&&t.parentNode.classList.add("is--active")}))}function i(){var e=document.documentElement.clientWidth;document.querySelectorAll(".nav__dropdown")&&document.querySelectorAll(".nav__dropdown").forEach((function(t){var o=t.scrollHeight/e*100;t.style.setProperty("--dropdown-height","".concat(o,"vw"))}))}function s(e,t){var o=e.getBoundingClientRect(),r=!1;t.forEach((function(e){var t=e.getBoundingClientRect();o.top<t.bottom&&o.bottom>t.top&&o.left<t.right&&o.right>t.left&&(r=!0)})),e.classList.toggle("is--hidden",r)}requestAnimationFrame((function e(o){t.raf(o),requestAnimationFrame(e)})),document.querySelector(".fixed-btn")&&document.querySelectorAll(".discuss-project, .footer")&&s(document.querySelector(".fixed-btn"),document.querySelectorAll(".discuss-project, .footer"));Inputmask().mask(document.querySelectorAll("input"));var c=document.querySelectorAll("textarea");c&&c.forEach((function(e){e.style.height=e.setAttribute("style","height: "+e.scrollHeight+"px"),e.classList.add("auto"),e.addEventListener("input",(function(t){e.style.height="auto",e.style.height=e.scrollHeight+"px"}))}));var l=document.getElementById("mobile-menu"),a=document.getElementById("hamburger-toggle");l&&a&&a.addEventListener("click",(function(e){e.preventDefault(),l.classList.contains("is--active")?(a.classList.remove("is--active"),l.classList.remove("is--active"),document.querySelector(".header")&&document.querySelector(".header").classList.remove("is--menu"),o(0)):(a.classList.add("is--active"),l.classList.add("is--active"),document.querySelector(".header")&&document.querySelector(".header").classList.add("is--menu"),o(1))}));var d=document.querySelectorAll(".nav__elem .nav__link");d&&d.forEach((function(t){t.addEventListener("click",(function(o){var r=t.closest(".nav__elem");e&&(r.classList.contains("is--open")||(o.preventDefault(),r.classList.add("is--open")))}))}));var u=document.querySelectorAll(".tabs__select-placeholder");u&&u.forEach((function(e){var t=function(){e.closest(".tabs__select").classList.remove("is--open")},o=function(e,t){var o=!1,r=function(o){for(var r=o.target;r;){if(e.includes(r))return;r=r.parentNode}t(),n()};function n(){o&&(document.documentElement.removeEventListener("click",r),o=!1)}return{setBodyChecker:function(){o||(document.documentElement.addEventListener("click",r),o=!0)},removeBodyChecker:n}}([e.parentNode],t);e.addEventListener("click",(function(r){r.preventDefault();var n=e.closest(".tabs__select");n.classList.contains("is--open")?t():(n.classList.add("is--open"),o.setBodyChecker())}))}));var p=document.querySelector(".cases__slider .swiper");p&&function(e){(function(e,t){var o=e.querySelector(".swiper-wrapper"),r=Array.from(o.children),n=t-r.length;if(n>0)for(var i=0;i<n;i++){var s=r[i%r.length].cloneNode(!0);s.classList.add("swiper-slide--clone"),o.append(s)}})(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:9),new Swiper(e,{slidesPerView:"auto",loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".cases__slider .swiper-button-next"}})}(p);var f=document.querySelectorAll(".all-cases-card__slider .swiper");f&&f.forEach((function(e){new Swiper(e,{slidesPerView:"auto",loop:!0,pagination:{el:e.closest(".all-cases-card__slider").querySelector(".swiper-pagination"),clickable:!0}})}));var m=document.querySelector(".about-services__slider .swiper");if(m&&window.innerWidth<=743)new Swiper(m,{slidesPerView:1,spaceBetween:20,loop:!0,pagination:{el:".swiper-pagination",clickable:!0}});var v=document.querySelector(".team__slider .swiper");if(v&&window.innerWidth<=743)new Swiper(v,{slidesPerView:"auto"});var y=document.querySelectorAll(".technical-solutions__slider .swiper");y&&y.forEach((function(e){new Swiper(e,{slidesPerView:4,loop:!0,pagination:{el:e.closest(".technical-solutions__slider").querySelector(".swiper-pagination"),clickable:!0},breakpoints:{0:{slidesPerView:1},744:{slidesPerView:4}}})}));var g=document.querySelectorAll(".development__slider .swiper");g&&g.forEach((function(e){new Swiper(e,{slidesPerView:1,loop:!0,pagination:{el:e.closest(".development__slider").querySelector(".swiper-pagination"),clickable:!0},navigation:{prevEl:e.closest(".development__slider").querySelector(".swiper-button-prev"),nextEl:e.closest(".development__slider").querySelector(".swiper-button-next")}})}));var h=document.querySelectorAll(".solutions__slider .swiper");h&&h.forEach((function(e){new Swiper(e,{slidesPerView:3,pagination:{el:e.closest(".solutions__slider").querySelector(".swiper-pagination"),clickable:!0},breakpoints:{0:{slidesPerView:"auto"},744:{slidesPerView:3}}})}));var w=document.querySelectorAll(".tools__slider .swiper");w&&w.forEach((function(e){new Swiper(e,{slidesPerView:"auto"})}));var _=document.querySelectorAll(".project-gallery__slider .swiper");_&&_.forEach((function(e){new Swiper(e,{slidesPerView:"auto",spaceBetween:20,pagination:{el:e.closest(".project-gallery__slider").querySelector(".swiper-pagination"),clickable:!0}})}));var S=document.querySelector(".header"),b=document.querySelectorAll(".common__section"),q=document.querySelectorAll(".common-nav__link"),L=null;b&&q&&(L=b[0],n());var E=document.querySelector(".circles");if(E){gsap.registerPlugin(ScrollTrigger);var k=E.querySelector(".circles__circle--big"),A=E.querySelector(".circles__circle--small"),x=getComputedStyle(k).getPropertyValue("--background").trim()||"#F0DFDD",P=getComputedStyle(A).getPropertyValue("--background").trim()||"#F0C6C0";window.innerWidth>=744?gsap.timeline({scrollTrigger:{trigger:E,start:"top top",end:"+=1000",scrub:!0}}).fromTo(k,{scale:1,x:0,backgroundColor:x,zIndex:-11},{scale:.5833,x:r(241),backgroundColor:P,zIndex:-10,ease:"power1.inOut"},0).fromTo(A,{scale:1,x:0,backgroundColor:P,zIndex:-10},{scale:1.7143,x:r(-210),backgroundColor:x,zIndex:-11,ease:"power1.inOut"},0):gsap.timeline({scrollTrigger:{trigger:E,start:"top top",end:"+=1000",scrub:!0}}).fromTo(k,{scale:1,x:0,backgroundColor:x,zIndex:-11},{scale:.5833,x:r(101),backgroundColor:P,zIndex:-10,ease:"power1.inOut"},0).fromTo(A,{scale:1,x:0,backgroundColor:P,zIndex:-10},{scale:1.7143,x:r(-90),backgroundColor:x,zIndex:-11,ease:"power1.inOut"},0)}window.addEventListener("scroll",(function(){window.scrollY>0?S.classList.add("is--fixed"):S.classList.remove("is--fixed"),document.querySelectorAll(".common__section").length>0&&document.querySelectorAll(".common-nav__link").length>0&&n(),document.querySelector(".fixed-btn")&&document.querySelectorAll(".discuss-project, .footer")&&s(document.querySelector(".fixed-btn"),document.querySelectorAll(".discuss-project, .footer"))})),window.addEventListener("load",(function(){i()})),window.addEventListener("resize",(function(){i(),document.querySelector(".fixed-btn")&&document.querySelectorAll(".discuss-project, .footer")&&s(document.querySelector(".fixed-btn"),document.querySelectorAll(".discuss-project, .footer"))}));var C=function(){},D=function(){},I=[],T=document.querySelector(".discuss-project-form");if(T){var V=function(e){var t=e.value.trim();e.closest(".input-field");return!(e.hasAttribute("data-required")&&!t)&&!(e.inputmask&&t&&!e.inputmask.isComplete())},B=Array.from(T.querySelectorAll(".input-field__input, .input-field__textarea"));T.setAttribute("novalidate",""),B.filter((function(e){return e.dataset.mask})).forEach((function(e){return Inputmask({mask:e.dataset.mask,clearIncomplete:!0}).mask(e)})),T.addEventListener("submit",(function(e){e.preventDefault(),T.querySelectorAll(".input-field.is--error").forEach((function(e){return e.classList.remove("is--error")}));for(var t=!0,r=0,n=B;r<n.length;r++){var i=n[r];V(i)||(i.closest(".input-field").classList.add("is--error"),t=!1)}if(t){new FormData(T);document.getElementById("popup-success")&&(document.getElementById("popup-success").classList.add("is--active"),o(1)),T.reset(),I=[],C(),D()}else{var s=T.querySelector(".input-field.is--error");if(s){var c=S.getBoundingClientRect().height+Number(20),l=s.getBoundingClientRect().top+window.pageYOffset-c;window.scrollTo({top:l,behavior:"smooth"})}}})),B.forEach((function(e){e.addEventListener("input",(function(){V(e)&&e.closest(".input-field").classList.remove("is--error")}))}))}var j=document.querySelector(".attach-files");if(j){var z=function(){I.length>=Y||W.click()},N=j.querySelector(".attach-files__attach"),O=j.querySelector(".attach-files__attach-btn"),W=j.querySelector(".attach-files__input"),F=j.querySelector(".attach-files__list"),H=j.querySelector(".attach-files-list__wrapper"),M=j.querySelector(".attach-files-list__progress-fill"),R=j.querySelector(".attach-files-list__progress-value"),Y=5;C=function(){var e=new DataTransfer;I.forEach((function(t){return e.items.add(t)})),j.querySelector(".attach-files__input").files=e.files},D=function(){I.length?(N.classList.add("is--hidden"),F.classList.add("is--active")):(N.classList.remove("is--hidden"),F.classList.remove("is--active")),H.innerHTML="",I.forEach((function(e){var t=e.name.split(".").pop().toLowerCase(),o=document.createElement("div");o.className="attach-files-list__item",o.innerHTML='\n                    <svg class="attach-files-list__icon">\n                    <use xlink:href="img/sprite.svg#icon-'.concat(t,'"></use>\n                    </svg>\n                    <span class="attach-files-list__title">').concat(e.name,'</span>\n                    <button type="button" class="attach-files-list__delete" aria-label="Удалить">\n                    <svg><use xlink:href="img/sprite.svg#icon-close"></use></svg>\n                    </button>\n                '),o.querySelector(".attach-files-list__delete").addEventListener("click",(function(){I=I.filter((function(t){return t!==e})),C(),D()})),H.appendChild(o)}));var e=Math.round(I.length/Y*100);M.style.width=e+"%",R.textContent="Загрузка файлов: ".concat(I.length," из ").concat(Y);var t=I.length>=Y;N.disabled=t,O.disabled=t,N.classList.toggle("is--disabled",t),O.classList.toggle("is--disabled",t)},N.addEventListener("click",(function(e){e.preventDefault(),z()})),O.addEventListener("click",(function(e){e.preventDefault(),z()})),W.addEventListener("change",(function(){I.length>=Y||(I=I.concat(Array.from(W.files)).slice(0,Y),W.value="",C(),D())})),["dragover","dragenter"].forEach((function(e){return j.addEventListener(e,(function(e){e.preventDefault(),j.classList.add("is--dragover")}))})),["dragleave","drop"].forEach((function(e){return j.addEventListener(e,(function(t){t.preventDefault(),j.classList.remove("is--dragover"),"drop"===e&&(I=I.concat(Array.from(t.dataTransfer.files)).slice(0,Y),C(),D())}))})),D()}var G=document.querySelectorAll(".popup"),J=document.querySelectorAll(".popup-btn"),K=document.querySelectorAll(".popup__close");G&&J&&K&&(G.forEach((function(e){e.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__wrap"))&&(e.preventDefault(),document.querySelectorAll(".popup.is--active").forEach((function(e){return e.classList.remove("is--active")})),o())}))})),J.forEach((function(e,t){e.addEventListener("click",(function(t){t.preventDefault();var r=e.dataset.id;document.querySelectorAll(".popup.is--active").forEach((function(e){return e.classList.remove("is--active")})),document.getElementById(r).classList.add("is--active"),o(1)}))})),K.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();e.closest(".popup").id;document.querySelectorAll(".popup.is--active").forEach((function(e){return e.classList.remove("is--active")})),o()}))})))}));